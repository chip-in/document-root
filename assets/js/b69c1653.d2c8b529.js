"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[918],{3023:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var r=s(3696);const i={},d=r.createContext(i);function c(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(d.Provider,{value:n},e.children)}},4566:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>x,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"docs/devSpecification/SPN/SPN","title":"SPN","description":"SPN \u306f Chip-in \u5185\u90e8\u3067\u9589\u9396\u3055\u308c\u305f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u3001 mTLS \u8a8d\u8a3c\u306b\u3088\u3063\u3066\u76f8\u4e92\u8a8d\u8a3c\u3057\u3001\u6697\u53f7\u5316\u3055\u308c\u307e\u3059\u3002","source":"@site/../docs/docs/devSpecification/10_SPN/10_SPN.md","sourceDirName":"docs/devSpecification/10_SPN","slug":"/docs/devSpecification/SPN/","permalink":"/docs/docs/devSpecification/SPN/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"SPN","sidebar_position":10}}');var i=s(2540),d=s(3023);const c={title:"SPN",sidebar_position:10},t="SPN",l={},o=[{value:"SPN Hub",id:"spn-hub",level:2},{value:"SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",id:"spn-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",level:2},{value:"SPN \u30bb\u30c3\u30b7\u30e7\u30f3",id:"spn-\u30bb\u30c3\u30b7\u30e7\u30f3",level:2},{value:"SPN \u30b3\u30cd\u30af\u30b7\u30e7\u30f3",id:"spn-\u30b3\u30cd\u30af\u30b7\u30e7\u30f3",level:2},{value:"SPN Hub Controle API",id:"spn-hub-controle-api",level:2},{value:"SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 crate",id:"spn-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8-crate",level:2},{value:"\u6982\u8981",id:"\u6982\u8981",level:3},{value:"Consumer \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",id:"consumer-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",level:3},{value:"<code>createSpnConsumerEndPoint</code>\u95a2\u6570",id:"createspnconsumerendpoint\u95a2\u6570",level:4},{value:"<code>spnConsumerEndPoint</code> \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",id:"spnconsumerendpoint-\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",level:4},{value:"\u5229\u7528\u4f8b",id:"\u5229\u7528\u4f8b",level:4},{value:"Provider \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",id:"provider-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",level:3},{value:"<code>createSpnProviderEndPoint</code>",id:"createspnproviderendpoint",level:4},{value:"<code>spnProviderEndPoint</code> \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",id:"spnproviderendpoint-\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",level:4},{value:"<code>spnProviderRequest</code> \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",id:"spnproviderrequest-\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",level:4},{value:"\u5229\u7528\u4f8b",id:"\u5229\u7528\u4f8b-1",level:3},{value:"SPN \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",id:"spn-\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",level:2},{value:"SPN Consumer \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",id:"spn-consumer-\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",level:3},{value:"SPN Provider \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",id:"spn-provider-\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",level:3}];function h(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"spn",children:"SPN"})}),"\n",(0,i.jsx)(n.p,{children:"SPN \u306f Chip-in \u5185\u90e8\u3067\u9589\u9396\u3055\u308c\u305f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u3001 mTLS \u8a8d\u8a3c\u306b\u3088\u3063\u3066\u76f8\u4e92\u8a8d\u8a3c\u3057\u3001\u6697\u53f7\u5316\u3055\u308c\u307e\u3059\u3002\nSPN Hub \u3092\u4e2d\u5fc3\u3068\u3057\u3066 SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089 QUIC \u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u63a5\u7d9a\u3059\u308b\u3053\u3068\u3067\u4eee\u60f3\u7684\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\nQUIC\u4e0a\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u3092 TCP \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001TCP \u901a\u4fe1\u3068\u4e92\u63db\u6027\u3092\u6301\u3063\u3066\u304a\u308a\u3001 SPN \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u3067TCP\u901a\u4fe1\u3092\u884c\u3048\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"SPNSessions",src:s(6766).A+""})}),"\n",(0,i.jsx)(n.p,{children:"\u4e0a\u8a18\u306f\u30e6\u30fc\u30b6\u304c API Gateway \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u305d\u308c\u304c\u30d7\u30ed\u30ad\u30b7\u3055\u308c\u3066 SPN \u7d4c\u7531\u3067\u30ed\u30b8\u30c3\u30af\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30ed\u30b8\u30c3\u30af\u30b5\u30fc\u30d3\u30b9\u304c SPN \u7d4c\u7531\u3067DBMS\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u69d8\u5b50\u3092\u8868\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"spn-hub",children:"SPN Hub"}),"\n",(0,i.jsx)(n.p,{children:"SPN Hub \u3067\u306f SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u306e QUIC \u3067\u306e\u63a5\u7d9a\u3092\u53d7\u3051\u4ed8\u3051\u3066\u3001\u4eee\u60f3\u7684\u3067\u9589\u3058\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"spn-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",children:"SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,i.jsx)(n.p,{children:"SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f QUIC \u3067 SPN Hub \u306b\u63a5\u7d9a\u3059\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u3059\u3002SPN\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f SPN create \u3092\u4f7f\u7528\u3057\u3066 rust \u3067\u958b\u767a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u304c\u3001 SPN \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001TCP\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8/\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"spn-\u30bb\u30c3\u30b7\u30e7\u30f3",children:"SPN \u30bb\u30c3\u30b7\u30e7\u30f3"}),"\n",(0,i.jsx)(n.p,{children:"SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u306f QUIC \u306e\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3068\u540c\u7fa9\u3067\u3059\u304c\u3001SPN\u306e\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3068\u306e\u6df7\u540c\u3092\u907f\u3051\u308b\u305f\u3081\u306b\u3042\u3048\u3066\u3001SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u547c\u3076\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u3053\u306e\u4ed6\u306b Chip-in \u3067\u306f HTTP \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3084\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3082\u767b\u5834\u3057\u307e\u3059\u304c\u3001\u305d\u3061\u3089\u3068\u3082\u533a\u5225\u3044\u305f\u3060\u304f\u3088\u3046\u304a\u9858\u3044\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.p,{children:"QUIC \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u78ba\u7acb\u5f8c\u3001\u6700\u521d\u306b SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089 SPN Hub \u306b\u5411\u304b\u3063\u3066\u5236\u5fa1\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u958b\u59cb\u3057\u307e\u3059\u3002\u5236\u5fa1\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u6700\u521d\u306e\u901a\u4fe1\u3068\u3057\u3066 SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306fSPN hub \u306b SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u78ba\u7acb\u8981\u6c42\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002\nSPN Hub \u306f\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u78ba\u7acb\u8981\u6c42\u304c SPN \u5185\u306e\u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9\u306b\u7167\u3089\u3057\u5408\u308f\u305b\u3066\u8a31\u5bb9\u3055\u308c\u3066\u3044\u308c\u3070 SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306bACK\u3092\u8fd4\u3059\u3068\u3068\u3082\u306b SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30e1\u30e2\u30ea\u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30bb\u30c3\u30b7\u30e7\u30f3\u78ba\u7acb\u5f8c\u3082\u5236\u5fa1\u30b9\u30c8\u30ea\u30fc\u30e0\u306f\u63a5\u7d9a\u3057\u305f\u72b6\u614b\u3068\u306a\u308a\u3001\u3055\u307e\u3056\u307e\u306a\u5236\u5fa1\u30d1\u30b1\u30c3\u30c8\u306e\u901a\u4fe1\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.p,{children:"SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u4ee5\u4e0b\u304c\u4fdd\u6301\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u9805\u76ee\u540d"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"startAt"}),(0,i.jsx)(n.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u958b\u59cb\u6642\u523b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"spnSessionId"}),(0,i.jsx)(n.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff08QUIC \u306e\u30b5\u30fc\u30d0\u5074\u30b3\u30cd\u30af\u30b7\u30e7\u30f3ID\u3092\u4f7f\u7528\u3059\u308b\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"spnEndPoint"}),(0,i.jsx)(n.td,{children:"QUIC\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u7acb\u306b\u4f7f\u7528\u3055\u308c\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e Subject \u306e\u5024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"endPointType"}),(0,i.jsx)(n.td,{children:'"serviceProvider", "serviceConsumer" \u306e\u3044\u305a\u308c\u304b'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"serviceUrn"}),(0,i.jsx)(n.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURN"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"totalConnectionCount"}),(0,i.jsx)(n.td,{children:"\u3053\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u4e0a\u3067\u4f5c\u6210\u3055\u308c\u305f SPN\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u7dcf\u6570"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"SPN\u3000\u30bb\u30c3\u30b7\u30e7\u30f3\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u958b\u8a2d\u6642\u3068\u7d42\u4e86\u6642\u306b\u30ed\u30b0\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u30ed\u30b0\u306e\u9805\u76ee\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u9805\u76ee\u540d"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"timestamp"}),(0,i.jsx)(n.td,{children:"\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u523b\uff08\u30ed\u30b0\u306e\u51fa\u529b\u6642\u523b\u3068\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u306e\u6642\u523b\u3092\u8a18\u9332\u3059\u308b\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"spnSessionId"}),(0,i.jsx)(n.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff08QUIC \u306e\u30b5\u30fc\u30d0\u5074\u30b3\u30cd\u30af\u30b7\u30e7\u30f3ID\u3092\u4f7f\u7528\u3059\u308b\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"spnEndPoint"}),(0,i.jsx)(n.td,{children:"QUIC\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u7acb\u306b\u4f7f\u7528\u3055\u308c\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e Subject \u306e\u5024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"eventType"}),(0,i.jsx)(n.td,{children:'"startSpnSession", "endSpnSession" \u306e\u3044\u305a\u308c\u304b'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"endPointType"}),(0,i.jsx)(n.td,{children:'"serviceProvider", "serviceConsumer" \u306e\u3044\u305a\u308c\u304b'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"serviceUrn"}),(0,i.jsx)(n.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30b5\u30fc\u30d3\u30b9\u306eURN"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"totalConnectionCount"}),(0,i.jsx)(n.td,{children:"\u3053\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u4e0a\u3067\u4f5c\u6210\u3055\u308c\u305f SPN\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u7dcf\u6570\u3002endSpnSession \u306e\u3068\u304d\u306e\u307f\u51fa\u529b\u3055\u308c\u308b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"elapsedTime"}),(0,i.jsx)(n.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u958b\u8a2d\u6642\u304b\u3089\u306e\u7d4c\u904e\u6642\u9593\u3002endSpnSession \u306e\u3068\u304d\u306e\u307f\u51fa\u529b\u3055\u308c\u308b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"terminateReason"}),(0,i.jsx)(n.td,{children:'\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u7d42\u4e86\u7406\u7531\u3002"shutdown", "terminatedByPeer", "error" \u306e\u3044\u305a\u308c\u304b\u3002endSpnSession \u306e\u3068\u304d\u306e\u307f\u51fa\u529b\u3055\u308c\u308b'})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"spn-\u30b3\u30cd\u30af\u30b7\u30e7\u30f3",children:"SPN \u30b3\u30cd\u30af\u30b7\u30e7\u30f3"}),"\n",(0,i.jsx)(n.p,{children:"SPN \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306f QUIC \u306e\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3068\u7570\u306a\u308a\u3001serviceConsumer \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089 SPN Hub \u3092\u7d4c\u7531\u3057\u3066 serviceProvider \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u63a5\u7d9a\u3059\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u3067\u3059\u3002\nSPN \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u69cb\u6210\u8981\u7d20\u304b\u3089\u306a\u308a\u307e\u3059\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"serviceConsumer \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068 SPN Hub \u306e\u9593\u306e\u53cc\u65b9\u5411 QUIC \u30b9\u30c8\u30ea\u30fc\u30e0"}),"\n",(0,i.jsx)(n.li,{children:"SPN Hub \u3068 serviceProvider \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u9593\u306e\u53cc\u65b9\u5411 QUIC \u30b9\u30c8\u30ea\u30fc\u30e0"}),"\n",(0,i.jsx)(n.li,{children:"SPN \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u7ba1\u7406\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"SPN\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u7acb\u306f"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"serviceConsumer \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f SPN Hub \u3068\u306e\u9593\u306e\u53cc\u65b9\u5411 QUIC \u30b9\u30c8\u30ea\u30fc\u30e0\u4e0a\u306b\u6700\u521d\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u308b"}),"\n",(0,i.jsx)(n.li,{children:"SPN Hub \u306f serviceProvider \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068\u306e\u9593\u306e\u53cc\u65b9\u5411 QUIC \u30b9\u30c8\u30ea\u30fc\u30e0\u4e0a\u306b\u305d\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u8ee2\u9001\u3059\u308b\nSPN \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u4ee5\u4e0b\u304c\u4fdd\u6301\u3055\u308c\u307e\u3059\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u9805\u76ee\u540d"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"startAt"}),(0,i.jsx)(n.td,{children:"\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u958b\u59cb\u6642\u523b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"spnConnectionId"}),(0,i.jsx)(n.td,{children:"SPN\u30b3\u30cd\u30af\u30b7\u30e7\u30f3ID\uff08QUIC \u306e\u30b9\u30c8\u30ea\u30fc\u30e0ID\u3092 serviceConsumer\u5074\u3001serviceProvider\u5074\u306e\u9806\u306b\u9023\u7d50\u3057\u305f\u3082\u306e\u3092\u4f7f\u7528\u3059\u308b\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"consumerSideSpnSessionId"}),(0,i.jsx)(n.td,{children:"serviceConsumer\u5074 SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u306eID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"providerSideSpnSessionId"}),(0,i.jsx)(n.td,{children:"serviceProvider\u5074 SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u306eID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"totalSentBytes"}),(0,i.jsx)(n.td,{children:"\u3053\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u4e0a\u3067 serviceConsumer\u304b\u3089serviceProvider\u306b\u9001\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u306e\u7d2f\u8a08\u30d0\u30a4\u30c8\u6570"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"totalReceiveBytes"}),(0,i.jsx)(n.td,{children:"\u3053\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u4e0a\u3067 serviceConsumer \u304cserviceProvider\u304b\u3089\u53d7\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u306e\u7d2f\u8a08\u30d0\u30a4\u30c8\u6570"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"SPN\u3000\u30bb\u30c3\u30b7\u30e7\u30f3\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u958b\u8a2d\u6642\u3068\u7d42\u4e86\u6642\u306b\u30ed\u30b0\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u30ed\u30b0\u306e\u9805\u76ee\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u9805\u76ee\u540d"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"timestamp"}),(0,i.jsx)(n.td,{children:"\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u523b\uff08\u30ed\u30b0\u306e\u51fa\u529b\u6642\u523b\u3068\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u306e\u6642\u523b\u3092\u8a18\u9332\u3059\u308b\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"spnConnectionId"}),(0,i.jsx)(n.td,{children:"SPN\u30b3\u30cd\u30af\u30b7\u30e7\u30f3ID\uff08QUIC \u306e\u30b9\u30c8\u30ea\u30fc\u30e0ID\u3092 serviceConsumer\u5074\u3001serviceProvider\u5074\u306e\u9806\u306b\u9023\u7d50\u3057\u305f\u3082\u306e\u3092\u4f7f\u7528\u3059\u308b\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"eventType"}),(0,i.jsx)(n.td,{children:'"startSpnConnection", "endSpnConnection" \u306e\u3044\u305a\u308c\u304b'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"consumerSideSpnSessionId"}),(0,i.jsx)(n.td,{children:"serviceConsumer\u5074 SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u306eID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"providerSideSpnSessionId"}),(0,i.jsx)(n.td,{children:"serviceProvider\u5074 SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u306eID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"totalSentBytes"}),(0,i.jsx)(n.td,{children:"\u3053\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u4e0a\u3067 serviceConsumer\u304b\u3089serviceProvider\u306b\u9001\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u306e\u7d2f\u8a08\u30d0\u30a4\u30c8\u6570\u3002 endSpnConnection \u306e\u3068\u304d\u306e\u307f\u51fa\u529b\u3055\u308c\u308b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"totalReceiveBytes"}),(0,i.jsx)(n.td,{children:"\u3053\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u4e0a\u3067 serviceConsumer \u304cserviceProvider\u304b\u3089\u53d7\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u306e\u7d2f\u8a08\u30d0\u30a4\u30c8\u6570\u3002 endSpnConnection \u306e\u3068\u304d\u306e\u307f\u51fa\u529b\u3055\u308c\u308b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"elapsedTime"}),(0,i.jsx)(n.td,{children:"\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u958b\u8a2d\u6642\u304b\u3089\u306e\u7d4c\u904e\u6642\u9593\u3002 endSpnConnection \u306e\u3068\u304d\u306e\u307f\u51fa\u529b\u3055\u308c\u308b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"disconnectReason"}),(0,i.jsx)(n.td,{children:'\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u5207\u65ad\u7406\u7531\u3002"closedByPeer", "closed", "error" \u306e\u3044\u305a\u308c\u304b\u3002 endSpnConnection \u306e\u3068\u304d\u306e\u307f\u51fa\u529b\u3055\u308c\u308b'})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"spn-hub-controle-api",children:"SPN Hub Controle API"}),"\n",(0,i.jsx)(n.p,{children:"SPN Hub Controle API \u3067\u306f SPN \u5185\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\nSPN Hub \u306f 127.0.0.1:8080 \u30dd\u30fc\u30c8\u3067 listen \u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e API \u306e Swagger\u306e\u5b9a\u7fa9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"openapi: 3.0.4\ninfo:\n  title: SPN API\n  description: |-\n    \u3053\u308c\u306f SPN \u306e\u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9\u3068\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306eAPI\u3067\u3042\u308b\u3002\n  contact:\n    email: mitsuru@procube.jp\n  license:\n    name: Apache 2.0\n    url: https://www.apache.org/licenses/LICENSE-2.0.html\n  version: 1.0.0\nservers:\n  - url: https://127.0.0.1:8080\ntags:\n  - name: service\n    description: SPN\u7d4c\u7531\u3067\u63d0\u4f9b\u3055\u308c\u308b\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\n  - name: urn\n    description: \u30ea\u30bd\u30fc\u30b9\u3092\u4e00\u610f\u306b\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u6587\u5b57\u5217\n    externalDocs:\n      description: Uniform Resource Names\n      url: https://tex2e.github.io/rfc-translater/html/rfc8141.html\npaths:\n  /services:\n    put:\n      tags:\n        - service\n        - urn\n      summary: Update an existing service.\n      description: Update an existing service by service URN.\n      operationId: updateService\n      requestBody:\n        description: Update an existent service in the SPN\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/Service'\n        required: true\n      responses:\n        '200':\n          description: Successful operation, return the new contents.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Service'\n        '400':\n          description: Invalid URN supplied\n        '404':\n          description: Service not found\n        '422':\n          description: Validation exception\n        default:\n          description: Unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Error\"\n    post:\n      tags:\n        - service\n      summary: Add a new service to the SPN.\n      description: Add a new service to the store.\n      operationId: addService\n      requestBody:\n        description: Create a new service in the store\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/Service'\n        required: true\n      responses:\n        '200':\n          description: Successful operation, return the new contents.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Service'\n        '400':\n          description: Invalid input\n        '422':\n          description: Validation exception\n        default:\n          description: Unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Error\"\n    get:\n      tags:\n        - service\n      summary: Finds Services\n      description: get list of services.\n      operationId: listServices\n      responses:\n        '200':\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Service'\n        '400':\n          description: Invalid status value\n        default:\n          description: Unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Error\"\n\n  /service/{serviceUrn}:\n    get:\n      tags:\n        - service\n      summary: Find service by urn.\n      description: Returns a single service.\n      operationId: getServiceByUrn\n      parameters:\n        - name: serviceUrn\n          in: path\n          description: URN of service to return\n          required: true\n          schema:\n            type: string\n      responses:\n        '200':\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Service'\n        '400':\n          description: Invalid URN supplied\n        '404':\n          description: Service not found\n        default:\n          description: Unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Error\"\n    delete:\n      tags:\n        - service\n      summary: Deletes a service.\n      description: Delete a service.\n      operationId: deleteService\n      parameters:\n        - name: serviceUrn\n          in: path\n          description: Pet id to delete\n          required: true\n          schema:\n            type: string\n      responses:\n        '200':\n          description: Service deleted\n        '400':\n          description: Invalid URN value\n        default:\n          description: Unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Error\"\ncomponents:\n  schemas:\n    Service:\n      required:\n        - urn\n      type: object\n      properties:\n        urn:\n          type: string\n          example: urn:chip-in:service:example.com:authz\n        providers:\n          type: array\n          items:\n            type: string\n          description: |-\n            \u5f53\u8a72\u30b5\u30fc\u30d3\u30b9\u306e\u63d0\u4f9b\u304c\u8a31\u53ef\u3055\u308c\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n            \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e Subject \u306e\u5024\u3068\u7167\u5408\u3055\u308c\u308b\n          example:\n            - oidc-authz-provider\n        consumers:\n          type: array\n          items:\n            type: string\n          description: |-\n            \u5f53\u8a72\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u304c\u8a31\u53ef\u3055\u308c\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n            \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e Subject \u306e\u5024\u3068\u7167\u5408\u3055\u308c\u308b\n          example:\n            - api-gateway\n    Error:\n      type: object\n      properties:\n        code:\n          type: string\n        message:\n          type: string\n      required:\n        - code\n        - message\n  requestBodies:\n    Service:\n      description: Service object that needs to be added to the SPN\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Service'\n"})}),"\n",(0,i.jsx)(n.h2,{id:"spn-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8-crate",children:"SPN \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 crate"}),"\n",(0,i.jsx)(n.h3,{id:"\u6982\u8981",children:"\u6982\u8981"}),"\n",(0,i.jsxs)(n.p,{children:["\u3053\u306e crate \u306f SPN (Service Provider Network) \u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002",(0,i.jsx)(n.br,{}),"\n","SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u78ba\u7acb\u3068\u3001\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u3088\u308b\u901a\u4fe1\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"consumer-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",children:"Consumer \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,i.jsxs)(n.h4,{id:"createspnconsumerendpoint\u95a2\u6570",children:[(0,i.jsx)(n.code,{children:"createSpnConsumerEndPoint"}),"\u95a2\u6570"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"async fn createSpnConsumerEndPoint(\n    spnHubUrl: &str,\n    serviceUrn: &str,\n    certificate: &str,\n    certificate_key: &str\n) -> Result<impl spnConsumerEndPoint, SpnError>\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5f15\u6570"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"spnHubUrl"}),": SPN \u30cf\u30d6\u306e URL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"serviceUrn"}),": \u30b5\u30fc\u30d3\u30b9\u306e URN"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"certificate"}),": PEM\u5f62\u5f0f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"certificate_key"}),": PEM\u5f62\u5f0f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u79d8\u5bc6\u9375"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u623b\u308a\u5024"}),(0,i.jsx)(n.br,{}),"\n","SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u78ba\u7acb\u3055\u308c\u305f ",(0,i.jsx)(n.code,{children:"spnConsumerEndPoint"})," \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306e\u30cf\u30f3\u30c9\u30eb\u3002\u30a8\u30e9\u30fc\u6642\u306f ",(0,i.jsx)(n.code,{children:"SpnError"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4e3b\u306a\u30a8\u30e9\u30fc\u4f8b"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u8aad\u307f\u8fbc\u307f\u5931\u6557"}),"\n",(0,i.jsx)(n.li,{children:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc"}),"\n",(0,i.jsx)(n.li,{children:"SPN Hub \u304b\u3089\u306e\u62d2\u5426"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"spnconsumerendpoint-\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",children:[(0,i.jsx)(n.code,{children:"spnConsumerEndPoint"})," \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u30e1\u30bd\u30c3\u30c9"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"async fn connect(&self, stream: BiDirectionalStream) -> Result<(), SpnError>"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u547c\u3073\u5074\u304c\u4e8b\u524d\u306b\u6e96\u5099\u3057\u305f\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30e0\u3092SPN\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306b\u63a5\u7d9a\u3059\u308b\u3002\u30a8\u30e9\u30fc\u6642\u306f ",(0,i.jsx)(n.code,{children:"SpnError"}),"\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u5229\u7528\u4f8b",children:"\u5229\u7528\u4f8b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'let endpoint = createSpnConsumerEndPoint(\n    "https://spn-hub.example.com",\n    "urn:example:service",\n    "/path/to/cert.pem"\n).await?;\n\nlet my_stream = BiDirectionalStream::new(/* ... */);\nendpoint.connect(my_stream).await?;\n// my_stream \u3092\u4f7f\u3063\u3066\u53cc\u65b9\u5411\u901a\u4fe1\u3092\u884c\u3046\n'})}),"\n",(0,i.jsx)(n.h3,{id:"provider-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",children:"Provider \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,i.jsx)(n.h4,{id:"createspnproviderendpoint",children:(0,i.jsx)(n.code,{children:"createSpnProviderEndPoint"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"async fn createSpnProviderEndPoint(\n    spnHubUrl: &str,\n    serviceUrn: &str,\n    certificate: &str,\n    certificate_key: &str\n) -> Result<impl spnProviderEndPoint, SpnError>\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5f15\u6570"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"spnHubUrl"}),": SPN \u30cf\u30d6\u306e URL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"serviceUrn"}),": \u30b5\u30fc\u30d3\u30b9\u306e URN"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"certificate"}),": PEM\u5f62\u5f0f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"certificate_key"}),": PEM\u5f62\u5f0f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u79d8\u5bc6\u9375"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u623b\u308a\u5024"}),(0,i.jsx)(n.br,{}),"\n","SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u78ba\u7acb\u3055\u308c\u305f ",(0,i.jsx)(n.code,{children:"spnProviderEndPoint"})," \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306e\u30cf\u30f3\u30c9\u30eb\u3002\u30a8\u30e9\u30fc\u6642\u306f ",(0,i.jsx)(n.code,{children:"SpnError"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4e3b\u306a\u30a8\u30e9\u30fc\u4f8b"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u30d7\u30ed\u30d0\u30a4\u30c0\u8a3c\u660e\u66f8\u306e\u8aad\u307f\u8fbc\u307f\u5931\u6557"}),"\n",(0,i.jsx)(n.li,{children:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc"}),"\n",(0,i.jsx)(n.li,{children:"SPN Hub \u304b\u3089\u306e\u62d2\u5426"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"spnproviderendpoint-\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",children:[(0,i.jsx)(n.code,{children:"spnProviderEndPoint"})," \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u30e1\u30bd\u30c3\u30c9"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"async fn listen(&self) -> Result<spnProviderRequest, SpnError>"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u65b0\u305f\u306a SPN \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u63a5\u7d9a\u3092\u5f85\u3061\u53d7\u3051\u3001\u63a5\u7d9a\u3055\u308c\u308b\u3068 ",(0,i.jsx)(n.code,{children:"spnProviderRequest"})," \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u8fd4\u3059\u3002\u30a8\u30e9\u30fc\u6642\u306f ",(0,i.jsx)(n.code,{children:"SpnError"}),"\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"spnproviderrequest-\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9",children:[(0,i.jsx)(n.code,{children:"spnProviderRequest"})," \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u30e1\u30bd\u30c3\u30c9"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"async fn accept(&self) -> Result<BiDirectionalStream, SpnError>"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["SPN \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u63a5\u7d9a\u3057\u3001\u53cc\u65b9\u5411\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u8fd4\u3059\u3002\u30a8\u30e9\u30fc\u6642\u306f ",(0,i.jsx)(n.code,{children:"SpnError"}),"\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u5229\u7528\u4f8b-1",children:"\u5229\u7528\u4f8b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'let provider = createSpnProviderEndPoint(\n    "https://spn-hub.example.com",\n    "urn:example:service",\n    "/path/to/cert.pem"\n).await?;\n\nlet request = provider.listen().await?;\nlet stream = request.accept().await?;\n// stream \u3092\u4f7f\u3063\u3066\u53cc\u65b9\u5411\u901a\u4fe1\u3092\u884c\u3046\n'})}),"\n",(0,i.jsx)(n.h2,{id:"spn-\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",children:"SPN \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8"}),"\n",(0,i.jsx)(n.p,{children:"SPN \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f SPN Hub \u306b\u63a5\u7d9a\u3057\u3001SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3059\u308b\u305f\u3081\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3067\u3059\u3002\nSPN Comsumer \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068 SPN Provider \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e2\u3064\u306e\u30bf\u30a4\u30d7\u304c\u3042\u308a\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"spn-consumer-\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",children:"SPN Consumer \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8"}),"\n",(0,i.jsx)(n.p,{children:"SPN Consumer \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f SPN Hub \u306b\u63a5\u7d9a\u3057\u3001SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3059\u308b\u305f\u3081\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3067\u3059\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u74b0\u5883\u5909\u6570\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\u6307\u5b9a\u3067\u304d\u308b\u74b0\u5883\u5909\u6570\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u74b0\u5883\u5909\u6570\u540d"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"}),(0,i.jsx)(n.th,{children:"\u5024\u306e\u4f8b"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SPN_HUB_URL"}),(0,i.jsx)(n.td,{children:"SPN Hub \u306e URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"https://spn-hub.example.com"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SPN_SERVICE_URN"}),(0,i.jsx)(n.td,{children:"\u30b5\u30fc\u30d3\u30b9\u306e URN"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"urn:example:service"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SPN_CERTIFICATE"}),(0,i.jsx)(n.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8"}),(0,i.jsx)(n.td,{children:"PEM\u5f62\u5f0f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SPN_CERTIFICATE_KEY"}),(0,i.jsx)(n.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u79d8\u5bc6\u9375"}),(0,i.jsx)(n.td,{children:"PEM\u5f62\u5f0f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u79d8\u5bc6\u9375"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"BIND_ADDRESS"}),(0,i.jsx)(n.td,{children:"\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u304c listen \u3059\u308b\u30d0\u30a4\u30f3\u30c9\u30a2\u30c9\u30ec\u30b9"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"127.0.0.11:8080"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"\u8d77\u52d5\u3059\u308b\u3068\u3001SPN Hub \u306b\u63a5\u7d9a\u3057\u3001SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3057\u307e\u3059\u3002\nBIND_ADDRESS \u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u63a5\u7d9a\u304c\u3042\u308b\u3054\u3068\u306b\u3001SPN Hub \u7d4c\u7531\u3067SPN\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3057\u30b5\u30fc\u30d3\u30b9\u306e\u30d7\u30ed\u30d0\u30a4\u30c0\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"spn-provider-\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8",children:"SPN Provider \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8"}),"\n",(0,i.jsx)(n.p,{children:"SPN Provider \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f SPN Hub \u306b\u63a5\u7d9a\u3057\u3001SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3059\u308b\u305f\u3081\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3067\u3059\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u74b0\u5883\u5909\u6570\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\u6307\u5b9a\u3067\u304d\u308b\u74b0\u5883\u5909\u6570\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u74b0\u5883\u5909\u6570\u540d"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"}),(0,i.jsx)(n.th,{children:"\u5024\u306e\u4f8b"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SPN_HUB_URL"}),(0,i.jsx)(n.td,{children:"SPN Hub \u306e URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"https://spn-hub.example.com"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SPN_SERVICE_URN"}),(0,i.jsx)(n.td,{children:"\u30b5\u30fc\u30d3\u30b9\u306e URN"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"urn:example:service"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SPN_CERTIFICATE"}),(0,i.jsx)(n.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8"}),(0,i.jsx)(n.td,{children:"PEM\u5f62\u5f0f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SPN_CERTIFICATE_KEY"}),(0,i.jsx)(n.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u79d8\u5bc6\u9375"}),(0,i.jsx)(n.td,{children:"PEM\u5f62\u5f0f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u79d8\u5bc6\u9375"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"FORWARD_ADDRESS"}),(0,i.jsx)(n.td,{children:"SPN Hub \u304b\u3089\u306e\u63a5\u7d9a\u3092\u8ee2\u9001\u3059\u308b\u30a2\u30c9\u30ec\u30b9"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"127.0.0.1:8080"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"\u8d77\u52d5\u3059\u308b\u3068\u3001SPN Hub \u306b\u63a5\u7d9a\u3057\u3001SPN \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3057\u307e\u3059\u3002\nSPN Hub \u304b\u3089\u306e\u63a5\u7d9a\u3092\u5f85\u3061\u53d7\u3051\u3001\u63a5\u7d9a\u304c\u3042\u308b\u3054\u3068\u306b\u3001SPN Hub \u7d4c\u7531\u3067SPN\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3057 FORWARD_ADDRESS \u306b\u30d7\u30ed\u30ad\u30b7\u8ee2\u9001\u3057\u307e\u3059\u3002"})]})}function x(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},6766:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/SPNSessions.drawio-99fce49468ce6ebb72c55c33aa61f951.svg"}}]);
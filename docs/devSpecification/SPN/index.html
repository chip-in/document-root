<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-devSpecification/SPN" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">SPN | Ops Frontier</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://chip-in.net/img/devsecops.svg"><meta data-rh="true" name="twitter:image" content="https://chip-in.net/img/devsecops.svg"><meta data-rh="true" property="og:url" content="https://chip-in.net/docs/devSpecification/SPN"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SPN | Ops Frontier"><meta data-rh="true" name="description" content="SPN は Chip-in 内部で閉鎖されたプライベートなネットワークで、 mTLS 認証によって相互認証し、暗号化されます。"><meta data-rh="true" property="og:description" content="SPN は Chip-in 内部で閉鎖されたプライベートなネットワークで、 mTLS 認証によって相互認証し、暗号化されます。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://chip-in.net/docs/devSpecification/SPN"><link data-rh="true" rel="alternate" href="https://chip-in.net/docs/devSpecification/SPN" hreflang="ja"><link data-rh="true" rel="alternate" href="https://chip-in.net/docs/devSpecification/SPN" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8fe6c1ce.css">
<script src="/assets/js/runtime~main.f4bf7d9d.js" defer="defer"></script>
<script src="/assets/js/main.1f4e947d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="ナビゲーション" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ナビゲーションバーを開く" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/chip-in-logo-text.png" alt="Chip-in Logo" class="themedComponent_siVc themedComponent--light_hHel"><img src="/img/chip-in-logo-text.png" alt="Chip-in Logo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/devDesign/index">設計書</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/devSpecification/SPN">仕様書/テスト項目書</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/orgs/chip-in/repositories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="ドキュメントのサイドバー" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/devSpecification/SPN">SPN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/devSpecification/APIGateway">API Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/devSpecification/inventory-openapi">インベントリAPIリファレンス</a></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sfvy"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SPN</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">このページの見出し</button></div><div class="theme-doc-markdown markdown"><header><h1>SPN</h1></header>
<p>SPN は Chip-in 内部で閉鎖されたプライベートなネットワークで、 mTLS 認証によって相互認証し、暗号化されます。
SPN Hub を中心として SPN エンドポイントから QUIC プロトコルで接続することで仮想的なネットワークを構築します。
QUIC上のストリームを TCP コネクションとして使用することで、TCP 通信と互換性を持っており、 SPN エージェントを使用することでマイクロサービス間でTCP通信を行えます。</p>
<p><img decoding="async" loading="lazy" alt="SPNSessions" src="/assets/images/SPNSessions.drawio-99fce49468ce6ebb72c55c33aa61f951.svg" class="img_SS3x"></p>
<p>上記はユーザが API Gateway にアクセスし、それがプロキシされて SPN 経由でロジックサービスにアクセスし、ロジックサービスが SPN 経由でDBMSにアクセスする様子を表しています。</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="spn-hub">SPN Hub<a href="#spn-hub" class="hash-link" aria-label="SPN Hub への直接リンク" title="SPN Hub への直接リンク">​</a></h2>
<p>SPN Hub では SPN エンドポイントからの QUIC での接続を受け付けて、仮想的で閉じたネットワークを提供します。</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="spn-エンドポイント">SPN エンドポイント<a href="#spn-エンドポイント" class="hash-link" aria-label="SPN エンドポイント への直接リンク" title="SPN エンドポイント への直接リンク">​</a></h2>
<p>SPN エンドポイントは QUIC で SPN Hub に接続するクライアントです。SPNエンドポイントは SPN create を使用して rust で開発することが可能です。
また、SPN エージェントを利用して、TCPのクライアント/サーバにも接続できます。</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="spn-セッション">SPN セッション<a href="#spn-セッション" class="hash-link" aria-label="SPN セッション への直接リンク" title="SPN セッション への直接リンク">​</a></h2>
<p>SPN セッションは QUIC のコネクションと同義ですが、SPNのコネクションとの混同を避けるためにあえて、SPN セッションと呼びます。
この他に Chip-in では HTTP のセッションやコネクションも登場しますが、それらとも区別してください。</p>
<p>QUIC コネクション確立後、最初に SPN エンドポイントから SPN Hub に向かって制御ストリームを開始します。制御ストリームの最初の通信として SPN エンドポイントはSPN hub に SPN セッション確立要求を送信します。
SPN Hub は、セッション確立要求が SPN 内のサービス定義に照らし合わせて許容されていれば SPN エンドポイントにACKを返すとともに SPN セッションオブジェクトをメモリ上に作成します。
セッション確立後も制御ストリームは接続した状態となり、 さまざまな制御パケットの通信に使用されます。</p>
<p>SPN セッションオブジェクトには以下が保持されます。</p>
<table><thead><tr><th>項目名</th><th>説明</th></tr></thead><tbody><tr><td>startAt</td><td>セッション開始時刻</td></tr><tr><td>spnSessionId</td><td>セッションID（QUIC のサーバ側コネクションIDを使用する）</td></tr><tr><td>spnEndPoint</td><td>QUICコネクションの確立に使用されたクライアント証明書の Subject の値</td></tr><tr><td>endPointType</td><td>&quot;serviceProvider&quot;, &quot;serviceConsumer&quot; のいずれか</td></tr><tr><td>serviceUrn</td><td>セッションのサービスのエンドポイントのURN</td></tr><tr><td>totalConnectionCount</td><td>このセッション上で作成された SPNコネクションの総数</td></tr></tbody></table>
<p>SPN　セッションはセッションの開設時と終了時にログを出力します。ログの項目は以下の通り。</p>
<table><thead><tr><th>項目名</th><th>説明</th></tr></thead><tbody><tr><td>timestamp</td><td>イベント発生時刻（ログの出力時刻と異なる場合があるのでイベント発生時の時刻を記録する）</td></tr><tr><td>spnSessionId</td><td>セッションID（QUIC のサーバ側コネクションIDを使用する）</td></tr><tr><td>spnEndPoint</td><td>QUICコネクションの確立に使用されたクライアント証明書の Subject の値</td></tr><tr><td>eventType</td><td>&quot;startSpnSession&quot;, &quot;endSpnSession&quot; のいずれか</td></tr><tr><td>endPointType</td><td>&quot;serviceProvider&quot;, &quot;serviceConsumer&quot; のいずれか</td></tr><tr><td>serviceUrn</td><td>セッションのサービスのURN</td></tr><tr><td>totalConnectionCount</td><td>このセッション上で作成された SPNコネクションの総数。endSpnSession のときのみ出力される</td></tr><tr><td>elapsedTime</td><td>セッション開設時からの経過時間。endSpnSession  のときのみ出力される</td></tr><tr><td>terminateReason</td><td>セッションの終了理由。&quot;shutdown&quot;, &quot;terminatedByPeer&quot;, &quot;error&quot; のいずれか。endSpnSession のときのみ出力される</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="spn-コネクション">SPN コネクション<a href="#spn-コネクション" class="hash-link" aria-label="SPN コネクション への直接リンク" title="SPN コネクション への直接リンク">​</a></h2>
<p>SPN コネクションは QUIC のコネクションと異なり、serviceConsumer エンドポイントから SPN Hub を経由して serviceProvider エンドポイントに接続するストリームです。
SPN コネクションは以下の構成要素からなります。</p>
<ul>
<li>serviceConsumer エンドポイントと SPN Hub の間の双方向 QUIC ストリーム</li>
<li>SPN Hub と serviceProvider エンドポイントの間の双方向 QUIC ストリーム</li>
<li>SPN コネクション管理オブジェクト</li>
</ul>
<p>SPNコネクションの確立は</p>
<ol>
<li>serviceConsumer エンドポイントは SPN Hub との間の双方向 QUIC ストリーム上に最初のパケットを送る</li>
<li>SPN Hub は serviceProvider エンドポイントとの間の双方向 QUIC ストリーム上にそのパケットを転送する
SPN コネクションオブジェクトには以下が保持されます。</li>
</ol>
<table><thead><tr><th>項目名</th><th>説明</th></tr></thead><tbody><tr><td>startAt</td><td>コネクション開始時刻</td></tr><tr><td>spnConnectionId</td><td>SPNコネクションID（QUIC のストリームIDを serviceConsumer側、serviceProvider側の順に連結したものを使用する）</td></tr><tr><td>consumerSideSpnSessionId</td><td>serviceConsumer側 SPN セッションのID</td></tr><tr><td>providerSideSpnSessionId</td><td>serviceProvider側 SPN セッションのID</td></tr><tr><td>totalSentBytes</td><td>このストリー  ム上で serviceConsumerからserviceProviderに送信したデータの累計バイト数</td></tr><tr><td>totalReceiveBytes</td><td>このストリーム上で serviceConsumer がserviceProviderから受信したデータの累計バイト数</td></tr></tbody></table>
<p>SPN　セッションはセッションの開設時と終了時にログを出力します。ログの項目は以下の通り。</p>
<table><thead><tr><th>項目名</th><th>説明</th></tr></thead><tbody><tr><td>timestamp</td><td>イベント発生時刻（ログの出力時刻と異なる場合があるのでイベント発生時の時刻を記録する）</td></tr><tr><td>spnConnectionId</td><td>SPNコネクションID（QUIC のストリームIDを serviceConsumer側、serviceProvider側の順に連結したものを使用する）</td></tr><tr><td>eventType</td><td>&quot;startSpnConnection&quot;, &quot;endSpnConnection&quot; のいずれか</td></tr><tr><td>consumerSideSpnSessionId</td><td>serviceConsumer側 SPN セッションのID</td></tr><tr><td>providerSideSpnSessionId</td><td>serviceProvider側 SPN セッションのID</td></tr><tr><td>totalSentBytes</td><td>このストリーム上で serviceConsumerからserviceProviderに送信したデータの累計バイト数。 endSpnConnection のときのみ出力される</td></tr><tr><td>totalReceiveBytes</td><td>このストリーム上で serviceConsumer がserviceProviderから受信したデータの累計バイト数。 endSpnConnection のときのみ出力される</td></tr><tr><td>elapsedTime</td><td>コネクション開設時からの経過時間。 endSpnConnection のときのみ出力される</td></tr><tr><td>disconnectReason</td><td>コネクションの切断理由。&quot;closedByPeer&quot;, &quot;closed&quot;, &quot;error&quot; のいずれか。 endSpnConnection のときのみ出力される</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="spnhub-コマンド">spnhub コマンド<a href="#spnhub-コマンド" class="hash-link" aria-label="spnhub コマンド への直接リンク" title="spnhub コマンド への直接リンク">​</a></h3>
<p>spnhub コマンドは SPN Hub を実装します。spnhub コマンドのパラメータはコマンドラインオプションと環境変数のいずれかで指定できます。
パラメータには以下のものがあります。</p>
<table><thead><tr><th>オプション</th><th>環境変数名</th><th>説明</th><th>デフォルト</th></tr></thead><tbody><tr><td>-c</td><td>SPNHUB_INVENTORY_URL</td><td>SPN Hub の構成情報を提供するインベントリのURL。</td><td><a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a></td></tr></tbody></table>
<p>spnhubコマンドは起動時とリロードシグナル受信時に構成情報を<a href="/docs/devSpecification/inventory-openapi">インベントリ</a> から読み込みます。具体的には以下の順に読み込みます。リロードシグナルは SIGUSR1 です。</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="1-レルムの読み込み">1. レルムの読み込み<a href="#1-レルムの読み込み" class="hash-link" aria-label="1. レルムの読み込み への直接リンク" title="1. レルムの読み込み への直接リンク">​</a></h4>
<p>全てのレルムを読み込みます。
SPN Hub はレルムごとに内部が分離されており、マルチテナントのシステムを容易に実装できます。</p>
<div class="redocusaurus redocusaurus-schema hide-example"><div class="sc-dTvVRJ ipMzWx"><div class="sc-jJLAfE jhaFXr"><div class="sc-ggWZvA gnAKQH"><table class="sc-eqNDNG dnhmEK"><tbody><tr class=""><td kind="field" title="name" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">name</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span><span class="sc-bEjUoa sc-cpclqO lhsTlU dDErjj">^[a-z0-9][a-z0-9-]*$</span></div> <div><div html="&lt;p&gt;レルムの名前。URN の一部として使用される。
文字列は小文字英字、数字、ハイフンのみを含むことができる。
ただし、ハイフンで始まることはできない。
名称 &amp;quot;master&amp;quot; は予約されており、使用できない。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>レルムの名前。URN の一部として使用される。
文字列は小文字英字、数字、ハイフンのみを含むことができる。
ただし、ハイフンで始まることはできない。
名称 &quot;master&quot; は予約されており、使用できない。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="title" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">title</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;レルムの日本語名称です。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>レルムの日本語名称です。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="description" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">description</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;レルムの説明文です。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>レルムの説明文です。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="cacert" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">cacert</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;realm 配下の SPN hub で mTLSにおけるクライアント証明書を発行したCA局の証明書(PEM形式)の文字列&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>realm 配下の SPN hub で mTLSにおけるクライアント証明書を発行したCA局の証明書(PEM形式)の文字列</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="signingKey" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">signingKey</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span><span> <span class="sc-bEjUoa sc-goiVcJ lhsTlU ebTGGn"> <!-- -->&gt;= 24 characters<!-- --> </span></span></div> <div><div html="&lt;p&gt;realm 配下のAPI Gateway でセッショントークンの署名に使用されるパスワード。
使用できる文字は英字、数字、ハイフン、アンダースコアのみである。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>realm 配下のAPI Gateway でセッショントークンの署名に使用されるパスワード。
使用できる文字は英字、数字、ハイフン、アンダースコアのみである。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="sessionTimeout" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">sessionTimeout</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">integer</span></div> <div><div html="&lt;p&gt;セッショントークンの有効期限。単 位は秒で、デフォルトは 2592000  秒 (30日)。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>セッショントークンの有効期限。単位は秒で、デフォルトは 2592000  秒 (30日)。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="administrators" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">administrators</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz">Array of </span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">strings</span></div> <div><div html="&lt;p&gt;レルムの管理者のユーザID。ユーザの管理はインベントリでは行わない。認証サービス内でのみ管理され、ここではそのIDのみを参照する。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>レルムの管理者のユーザID。ユーザの管理はインベントリでは行わない。認証サービス内でのみ管理され、ここではそのIDのみを参照する。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="expiredAt" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">expiredAt</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu"> <!-- -->&lt;<!-- -->date-time<!-- -->&gt;<!-- --> </span></div> <div><div html="&lt;p&gt;レルムの有効期限。ISO8601形式で指定する。
この日時を過ぎると、レルムの disabled フラグは true となり、関連するリソースへのアクセスが制限される。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>レルムの有効期限。ISO8601形式で指定する。
この日時を過ぎると、レルムの disabled フラグは true となり、関連するリソースへのアクセスが制限される。</p>
</div></div></div></td></tr><tr class="last"><td kind="field" title="disabled" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">disabled</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">boolean</span></div> <div><div html="&lt;p&gt;レルムが無効化されているかどうかを示すフラグ。
true の場合、レルムは無効化されており、関連するリソースへのアクセスが制限される。
false の場合、レルムは有効であり、通常の操作が可能である。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>レルムが無効化されているかどうかを示すフラグ。
true の場合、レルムは無効化されており、関連するリソースへのアクセスが制限される。
false の場合、レルムは有効であり、通常の操作が可能である。</p>
</div></div></div></td></tr></tbody></table></div></div></div></div>
<ul>
<li>disabled が True のものは無視します。</li>
<li>リロードにおいては、一覧の前後を比較し、追加削除を行います。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="2-spn-hub-の構築">2. SPN Hub の構築<a href="#2-spn-hub-の構築" class="hash-link" aria-label="2. SPN Hub の構築 への直接リンク" title="2. SPN Hub の構築 への直接リンク">​</a></h3>
<p>レルムごとに SPN Hub を構築します。</p>
<div class="redocusaurus redocusaurus-schema hide-example"><div class="sc-dTvVRJ ipMzWx"><div class="sc-jJLAfE jhaFXr"><div class="sc-ggWZvA gnAKQH"><table class="sc-eqNDNG dnhmEK"><tbody><tr class=""><td kind="field" title="name" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">name</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;SPN Hub の名前。URN の一部として使用される。
文字列は小文字英字、数字、ハイフン、アンダースコアのみを含むことができる。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>SPN Hub の名前。URN の一部として使用される。
文字列は小文字英字、数字、ハイフン、アンダースコアのみを含むことができる。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="realm" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">realm</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu"> <!-- -->&lt;<!-- -->urn<!-- -->&gt;<!-- --> </span></div> <div><div html="&lt;p&gt;SPN Hub が属する realm の URN。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>SPN Hub が属する realm の URN。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="urn" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">urn</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;SPN Hub のURN。URNは、SPN Hubを一意に識別するための文字列で、以下の形式で構成される。
urn:chip-in:network:{realm}:{name}&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>SPN Hub のURN。URNは、SPN Hubを一意に識別するための文字列で、以下の形式で構成される。
urn:chip-in:network:{realm}:{name}</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="title" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">title</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;SPN Hub の日本語名称です。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>SPN Hub の日本語名称です。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="description" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">description</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;SPN Hub の説明文です。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>SPN Hub の説明文です。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="fqdn" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">fqdn</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;SPN Hub のサーバのFQDN&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>SPN Hub のサーバのFQDN</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="serverPort" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">serverPort</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">integer</span></div> <div><div html="&lt;p&gt;SPN Hub のサーバのポート番号。デフォルトは 443&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>SPN Hub のサーバのポート番号。デフォルトは 443</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="serverCert" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">serverCert</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;mTLSにおけるサーバ証明書(PEM形式)の文字列。
SPN Hub のサーバは、この証明書を使用してクライアントとの通信を暗号化する。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>mTLSにおけるサーバ証明書(PEM形式)の文字列。
SPN Hub のサーバは、この証明書を使用してクライアントとの通信を暗号化する。</p>
</div></div></div></td></tr><tr class="last"><td kind="field" title="serverCertKey" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">serverCertKey</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;mTLSにおけるサーバ証明書の秘密鍵(PEM形式)の文字列。
SPN Hub のサーバは、この秘密鍵を使用してクライアントとの通信を暗号化する。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>mTLSにおけるサーバ証明書の秘密鍵(PEM形式)の文字列。
SPN Hub のサーバは、この秘密鍵を使用してクライアントとの通信を暗号化する。</p>
</div></div></div></td></tr></tbody></table></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="3-サービスの構築">3. サービスの構築<a href="#3-サービスの構築" class="hash-link" aria-label="3. サービスの構築 への直接リンク" title="3. サービスの構築 への直接リンク">​</a></h3>
<p>SPN Hub ごとにサービスの定義を読み込みます。</p>
<div class="redocusaurus redocusaurus-schema hide-example"><div class="sc-dTvVRJ ipMzWx"><div class="sc-jJLAfE jhaFXr"><div class="sc-ggWZvA gnAKQH"><table class="sc-eqNDNG dnhmEK"><tbody><tr class=""><td kind="field" title="name" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">name</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;サービスの名前。URN の一部として使用される。
文字列は小文字英字、数字、ハイフン、アンダースコアのみを含むことができる。
ただし、先頭がハイフンであってはならない。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>サービスの名前。URN の一部として使用される。
文字列は小文字英字、数字、ハイフン、アンダースコアのみを含むことができる。
ただし、先頭がハイフンであってはならない。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="hub" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">hub</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu"> <!-- -->&lt;<!-- -->urn<!-- -->&gt;<!-- --> </span></div> <div><div html="&lt;p&gt;サービスが接続される SPN Hub のURN。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>サービスが接続される SPN Hub のURN。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="urn" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">urn</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;サービスのURN。URNは、サービスを一意に識別するための文字列で、以下の形式で構成される。&lt;br/&gt;
urn:chip-in:service:{realm}:{hubName}:{name}&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>サービスのURN。URNは、サービスを一意に識別するための文字列で、以下の形式で構成される。<br>
urn:chip-in:service:{realm}:{hubName}:{name}</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="title" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">title</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;サービスの日本語名称です。URN の一部として使用される。
文字列は日本語を含むことができる。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>サービスの日本語名称です。URN の一部として使用される。
文字列は日本語を含むことができる。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="description" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">description</span></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;サービスの説明文です。URN の一部として使用される。
文字列は日本語を含むことができる。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>サービスの説明文です。URN の一部として使用される。
文字列は日本語を含むことができる。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="realm" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">realm</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;サービスが属するレルムの名前。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>サービスが属するレルムの名前。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="hubName" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">hubName</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">string</span></div> <div><div html="&lt;p&gt;サービスが接続される SPN Hub の名前。
SPN Hub は、サービスの提供を行うためのネットワークハブであり、サービスへのアクセスを管理する。&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>サービスが接続される SPN Hub の名前。
SPN Hub は、サービスの提供を行うためのネットワークハブであり、サービスへのアクセスを管理する。</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="availabilityManagement" class="sc-kCuUfV sc-fbQrwq sc-itBLYH hkAGZU gHPYmL JMnAN"><span class="sc-hwddKA ccHsKL"></span><button aria-label="expand availabilityManagement"><span class="property-name">availabilityManagement</span><svg class="sc-dntSTA ihtenX" version="1.1" viewBox="0 0 24 24" x="0" xmlns="http://www.w3.org/2000/svg" y="0" aria-hidden="true"><polygon points="17.3 8.3 12 13.6 6.7 8.3 5.3 9.7 12 16.4 18.7 9.7 "></polygon></svg></button></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz"></span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">object</span></div> <div><div html="&lt;p&gt;コンテナクラスタ内でマイクロサービスのスケジュール起動、オンデマンド起動を行うためのパラメータ&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>コンテナクラスタ内でマイクロサービスのスケジュール起動、オンデマンド起動を行うためのパラメータ</p>
</div></div></div></td></tr><tr class=""><td kind="field" title="providers" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">providers</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz">Array of </span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">strings</span></div> <div><div html="&lt;p&gt;当該サービスの提供が許可されるエンドポイント
クライアント証明書の Subject の値と照合される&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>当該サービスの提供が許可されるエンドポイント
クライアント証明書の Subject の値と照合される</p>
</div></div></div></td></tr><tr class="last"><td kind="field" title="consumers" class="sc-kCuUfV sc-fbQrwq hkAGZU gHPYmL"><span class="sc-hwddKA ccHsKL"></span><span class="property-name">consumers</span><div class="sc-bEjUoa sc-iIvHqT lhsTlU gZffex">required</div></td><td class="sc-gGKoUb kCKatb"><div><div><span class="sc-bEjUoa sc-boKDdR lhsTlU hetTHz">Array of </span><span class="sc-bEjUoa sc-fOOuSg lhsTlU ffkXKu">strings</span></div> <div><div html="&lt;p&gt;当該サービスの利用が許可されるエンドポイン ト
クライアント証明書の Subject の値と照合される&lt;/p&gt;
" class="sc-eVqvcJ sc-fszimp gvxaTx kZZNuK"><p>当該サービスの利用が許可されるエンドポイント
クライアント証明書の Subject の値と照合される</p>
</div></div></div></td></tr></tbody></table></div></div></div></div>
<p>availabilityManagement が指定されていて、かつ ondemandStart が false のサービスについてはクラスタマネージャを呼び出してサービスを起動する。
サービス定義の読み込みが終わった時点で、SPN Hub での QUIC パケットの受信を開始します。</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="spn-エンドポイント-crate">SPN エンドポイント crate<a href="#spn-エンドポイント-crate" class="hash-link" aria-label="SPN エンドポイント crate への直接リンク" title="SPN エンドポイント crate への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="概要">概要<a href="#概要" class="hash-link" aria-label="概要 への直接リンク" title="概要 への直接リンク">​</a></h3>
<p>この crate は SPN (Service Provider Network) のエンドポイントを提供します。<br>
<!-- -->SPN セッションの確立と、双方向ストリームによる通信をサポートします。</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="consumer-エンドポイント">Consumer エンドポイント<a href="#consumer-エンドポイント" class="hash-link" aria-label="Consumer エンドポイント への直接リンク" title="Consumer エンドポイント への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="createspnconsumerendpoint関数"><code>createSpnConsumerEndPoint</code>関数<a href="#createspnconsumerendpoint関数" class="hash-link" aria-label="createspnconsumerendpoint関数 への直接リンク" title="createspnconsumerendpoint関数 への直接リンク">​</a></h4>
<div class="language-rust codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-rust codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">createSpnConsumerEndPoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spnHubUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serviceUrn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">Result</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">impl</span><span class="token plain"> spnConsumerEndPoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">SpnError</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>引数</strong>
<ul>
<li><code>spnHubUrl</code>: SPN ハブの URL</li>
<li><code>serviceUrn</code>: サービスの URN</li>
<li><code>certificate</code>: PEM形式のクライアント証明書</li>
<li><code>certificate_key</code>: PEM形式のクライアント証明書の秘密鍵</li>
</ul>
</li>
<li><strong>戻り値</strong><br>
<!-- -->SPN セッションが確  立された <code>spnConsumerEndPoint</code> インタフェースのハンドル。エラー時は <code>SpnError</code>。</li>
<li><strong>主なエラー例</strong>
<ul>
<li>クライアント証明書の読み込み失敗</li>
<li>ネットワークエラー</li>
<li>SPN Hub からの拒否</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="spnconsumerendpoint-インタフェース"><code>spnConsumerEndPoint</code> インタフェース<a href="#spnconsumerendpoint-インタフェース" class="hash-link" aria-label="spnconsumerendpoint-インタフェース への直接リンク" title="spnconsumerendpoint-インタフェース への直接リンク">​</a></h4>
<ul>
<li><strong>メソッド</strong>
<ul>
<li><code>async fn connect(&amp;self, stream: BiDirectionalStream) -&gt; Result&lt;(), SpnError&gt;</code>
<ul>
<li>呼び側が事前に準備した双方向ストリームをSPNコネクションに接続する。エラー時は <code>SpnError</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="利用例">利用例<a href="#利用例" class="hash-link" aria-label="利用例 への直接リンク" title="利用例 への直接リンク">​</a></h4>
<div class="language-rust codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-rust codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> endpoint </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createSpnConsumerEndPoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;https://spn-hub.example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;urn:chip-in:service:example-realm:foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;/path/to/cert.pem&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">await</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> my_stream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">BiDirectionalStream</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endpoint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">my_stream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">await</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// my_stream を使って双方向通信を行う</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="provider-エンドポイント">Provider エンドポイント<a href="#provider-エンドポイント" class="hash-link" aria-label="Provider エンドポイント への直接リンク" title="Provider エンドポイント への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="createspnproviderendpoint"><code>createSpnProviderEndPoint</code><a href="#createspnproviderendpoint" class="hash-link" aria-label="createspnproviderendpoint への直接リンク" title="createspnproviderendpoint への直接リンク">​</a></h4>
<div class="language-rust codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-rust codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">createSpnProviderEndPoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spnHubUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serviceUrn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">Result</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">impl</span><span class="token plain"> spnProviderEndPoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">SpnError</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>引数</strong>
<ul>
<li><code>spnHubUrl</code>: SPN ハブの URL</li>
<li><code>serviceUrn</code>: サービスの URN</li>
<li><code>certificate</code>: PEM形式のクライアント証明書</li>
<li><code>certificate_key</code>: PEM形式のクライアント証明書の秘密鍵</li>
</ul>
</li>
<li><strong>戻り値</strong><br>
<!-- -->SPN セッションが確立された <code>spnProviderEndPoint</code> インタフェースのハンドル。エラー時は <code>SpnError</code>。</li>
<li><strong>主なエラー例</strong>
<ul>
<li>プロバイダ証明書の読み込み失敗</li>
<li>ネットワークエラー</li>
<li>SPN Hub からの拒否</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="spnproviderendpoint-インタフェース"><code>spnProviderEndPoint</code> インタフェース<a href="#spnproviderendpoint-インタフェース" class="hash-link" aria-label="spnproviderendpoint-インタフェース への直接リンク" title="spnproviderendpoint-インタフェース への直接リンク">​</a></h4>
<ul>
<li><strong>メソッド</strong>
<ul>
<li><code>async fn listen(&amp;self) -&gt; Result&lt;spnProviderRequest, SpnError&gt;</code>
<ul>
<li>新たな SPN コネクションの接続を待ち受け、接続されると <code>spnProviderRequest</code> インタフェースを返す。エラー時は <code>SpnError</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="spnproviderrequest-インタフェース"><code>spnProviderRequest</code> インタフェース<a href="#spnproviderrequest-インタフェース" class="hash-link" aria-label="spnproviderrequest-インタフェース への直接リンク" title="spnproviderrequest-インタフェース への直接リンク">​</a></h4>
<ul>
<li><strong>メソッド</strong>
<ul>
<li><code>async fn accept(&amp;self) -&gt; Result&lt;BiDirectionalStream, SpnError&gt;</code>
<ul>
<li>SPN コネクションを接続し、双方向ストリームを返す。エラー時は <code>SpnError</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="利用例-1">利用例<a href="#利用例-1" class="hash-link" aria-label="利用例 への直接リンク" title="  利用例 への直接リンク">​</a></h3>
<div class="language-rust codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-rust codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> provider </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createSpnProviderEndPoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;https://spn-hub.example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;urn:chip-in:service:example-realm:foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;/path/to/cert.pem&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">await</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> provider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">await</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> stream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">accept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">await</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// stream を使って双方向通信を行う</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="spn-エージェント">SPN エージェント<a href="#spn-エージェント" class="hash-link" aria-label="SPN エージェント への直接リンク" title="SPN エージェント への直接リンク">​</a></h2>
<p>SPN エージェントは SPN Hub に接続し、SPN セッションを確立するためのエージェントです。
SPN Comsumer エージェントと SPN Provider エージェントの2つのタイプがあります。</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="spn-consumer-エージェント">SPN Consumer エージェント<a href="#spn-consumer-エージェント" class="hash-link" aria-label="SPN Consumer エージェント への直接リンク" title="SPN Consumer エージェント への直接リンク">​</a></h3>
<p>SPN Consumer エージェントは SPN Hub に接続し、SPN セッションを確立するためのエージェントです。
パラメータは環境変数で指定します。指定できる環境変数は以下の通りです。</p>
<table><thead><tr><th>環境変数名</th><th>説明</th><th>値の例</th></tr></thead><tbody><tr><td>SPN_HUB_URL</td><td>SPN Hub の URL</td><td><code>https://spn-hub.example.com</code></td></tr><tr><td>SPN_SERVICE_URN</td><td>サービスの URN</td><td><code>urn:example:service</code></td></tr><tr><td>SPN_CERTIFICATE</td><td>クライアント証明書</td><td>PEM形式のクライアント証明書</td></tr><tr><td>SPN_CERTIFICATE_KEY</td><td>クライアント証明書秘密鍵</td><td>PEM形式のクライアント証明書の秘密鍵</td></tr><tr><td>BIND_ADDRESS</td><td>エージェントが listen するバインドアドレス</td><td><code>127.0.0.11:8080</code></td></tr></tbody></table>
<p>起動すると、SPN Hub に接続し、SPN セッションを確立します。
BIND_ADDRESS にクライアントからの接続があるごとに、SPN Hub 経由でSPNコネクションを確立しサービスのプロバイダに接続します。</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="spn-provider-エージェント">SPN Provider エージェント<a href="#spn-provider-エージェント" class="hash-link" aria-label="SPN Provider エージェント への直接リンク" title="SPN Provider エージェント への直接リンク">​</a></h3>
<p>SPN Provider エージェントは SPN Hub に接続し、SPN セッションを確立するためのエージェントです。
パラメータは環境変数で指定します。指定できる環境変数は以下の通りです。</p>
<table><thead><tr><th>環境変数名</th><th>説明</th><th>値の例</th></tr></thead><tbody><tr><td>SPN_HUB_URL</td><td>SPN Hub の URL</td><td><code>https://spn-hub.example.com</code></td></tr><tr><td>SPN_SERVICE_URN</td><td>サービスの URN</td><td><code>urn:example:service</code></td></tr><tr><td>SPN_CERTIFICATE</td><td>クライアント証明書</td><td>PEM形式のクライアント証明書</td></tr><tr><td>SPN_CERTIFICATE_KEY</td><td>クライアント証明書秘密鍵</td><td>PEM形式のクライアント証明書の秘密鍵</td></tr><tr><td>FORWARD_ADDRESS</td><td>SPN Hub からの接続を転送するアドレス</td><td><code>127.0.0.1:8080</code></td></tr></tbody></table>
<p>起動すると、SPN Hub に接続し、SPN セッションを確立します。
SPN Hub からの接続を待ち受け、接続があるごとに、SPN Hub 経由でSPNコネクションを確立し FORWARD_ADDRESS にプロキシ転送します。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--next" href="/docs/devSpecification/APIGateway"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">API Gateway</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#spn-hub" class="table-of-contents__link toc-highlight">SPN Hub</a></li><li><a href="#spn-エンドポイント" class="table-of-contents__link toc-highlight">SPN エンドポイント</a></li><li><a href="#spn-セッション" class="table-of-contents__link toc-highlight">SPN セッション</a></li><li><a href="#spn-コネクション" class="table-of-contents__link toc-highlight">SPN コネクション</a><ul><li><a href="#spnhub-コマンド" class="table-of-contents__link toc-highlight">spnhub コマンド</a></li><li><a href="#2-spn-hub-の構築" class="table-of-contents__link toc-highlight">2. SPN Hub の構築</a></li><li><a href="#3-サービスの構築" class="table-of-contents__link toc-highlight">3. サービスの構築</a></li></ul></li><li><a href="#spn-エンドポイント-crate" class="table-of-contents__link toc-highlight">SPN エンドポイント crate</a><ul><li><a href="#概要" class="table-of-contents__link toc-highlight">概要</a></li><li><a href="#consumer-エンドポイント" class="table-of-contents__link toc-highlight">Consumer エンドポイント</a></li><li><a href="#provider-エンドポイント" class="table-of-contents__link toc-highlight">Provider エンドポイント</a></li><li><a href="#利用例-1" class="table-of-contents__link toc-highlight">利用例</a></li></ul></li><li><a href="#spn-エージェント" class="table-of-contents__link toc-highlight">SPN エージェント</a><ul><li><a href="#spn-consumer-エージェント" class="table-of-contents__link toc-highlight">SPN Consumer エージェント</a></li><li><a href="#spn-provider-エージェント" class="table-of-contents__link toc-highlight">SPN Provider エージェント</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>